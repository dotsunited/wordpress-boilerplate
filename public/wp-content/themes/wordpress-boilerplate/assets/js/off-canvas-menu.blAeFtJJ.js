import{p as z,m as G,s as N,t as P,o as d,c as L,a as H,b as J,d as Q}from"./ctrly.u0PsaQiZ.js";function C(){try{const{activeElement:r}=document;return r&&r.nodeName?r:document.body}catch{return document.body}}function U(r){const i=z(r).map(n=>[n,n.scrollTop,n.scrollLeft]);return()=>{i.forEach(n=>{n[0].scrollTop=n[1],n[0].scrollLeft=n[2]})}}function h(r,{restoreScrollPosition:i}={}){let n;i&&(n=U(r));try{r.focus()}catch{}n&&n()}function V(r){return G(r,N)&&P(r)}function F(r,i,n,c,u={capture:!1}){const O=u.once===!0;delete u.once;const b=d(r,i,A=>{const l=L(A.target,n);l&&(O&&b(),c.call(l,A,l))},u);return b}function W(r,i,n={}){if(!r||typeof r.dispatchEvent!="function")return!0;n.bubbles=n.bubbles||!1,n.cancelable=n.cancelable||!1,n.composed=n.composed||!1,n.detail=n.detail||null;let c;try{c=new CustomEvent(i,n)}catch{c=document.createEvent("CustomEvent"),c.initCustomEvent(i,n.bubbles,n.cancelable,n.detail)}return r.dispatchEvent(c)}function X(r){const i=document.readyState;if(i==="complete"||i==="interactive"){setTimeout(r,0);return}document.addEventListener("DOMContentLoaded",()=>{r()},H({capture:!0,once:!0,passive:!0}))}function E(r,i){const n=arguments.length>1?i:document;return!n||typeof n.querySelectorAll!="function"?[]:[].slice.call(n.querySelectorAll(r))}function j(r){return J(arguments.length>0?r:document,N).filter(P).sort(Q)}const Y={selector:"[data-ctrly]",context:null,focusTarget:!0,closeOnBlur:!0,closeOnEsc:!0,closeOnOutsideClick:!0,closeOnScroll:!1,trapFocus:!1,allowMultiple:!1,on:null,autoInit:!0};function Z(r){const i={};return[Y,r].forEach(c=>{for(const u in c)Object.prototype.hasOwnProperty.call(c,u)&&(i[u]=c[u])}),i}function p(r){return"which"in r?r.which:r.keyCode}function x(r){return E(`[aria-controls="${r.id}"]`)}function y(r){return document.getElementById(r.getAttribute("aria-controls")||r.getAttribute("data-ctrly"))}function T(r){r.removeAttribute("aria-pressed"),r.removeAttribute("aria-controls"),r.removeAttribute("aria-expanded")}let R=0;function K(r={}){const i=Z(r),n=i.selector,c=i.on||{},u={};function O(t){return i.context?L(t,i.context):document}function b(t,e){return typeof c[e]=="function"&&c[e](t)===!1?!1:W(t,`ctrly:${e}`,{bubbles:!0,cancelable:!0})!==!1}function A(t){let e=t;for(;e;){if(e.id&&u[e.id])return e;e=e.parentElement}}function l(t,e=!0){if(!t||!t.hasAttribute("data-ctrly-opened")||!b(t,"close"))return!1;const s=C(),{lastActiveElement:o,destroy:a}=u[t.id]||{};return delete u[t.id],a&&a(),x(t).forEach(f=>{f.tagName.toLowerCase()!=="button"&&f.setAttribute("aria-pressed","false"),f.setAttribute("aria-expanded","false")}),t.removeAttribute("data-ctrly-opened"),t.setAttribute("aria-hidden","true"),t.removeAttribute("tabindex"),t.blur(),e&&o&&t.contains(s)&&h(o,{restoreScrollPosition:!0}),b(t,"closed"),t}function M(t){E(n,O(t)).forEach(e=>{const s=y(e);s&&s.id!==t.id&&l(s,!1)})}function _(t,e){const s=[];if(i.closeOnBlur&&!i.trapFocus&&s.push(d(document,"focusin",o=>{e.contains(o.target)||setTimeout(()=>{l(e,!1)},0)},{capture:!0,passive:!0})),i.closeOnEsc&&s.push(d(document,"keydown",o=>{p(o)===27&&l(e)&&o.preventDefault()})),i.closeOnOutsideClick&&s.push(d(document,"click",o=>{p(o)===1&&!e.contains(o.target)&&!L(o.target,n)&&l(e)},{passive:!0})),i.closeOnScroll){let o=!1;const a=()=>{o=!0},f=()=>{o=!1};s.push(d(e,"mouseenter",a,{passive:!0})),s.push(d(e,"mouseleave",f,{passive:!0})),s.push(d(e,"touchstart",a,{passive:!0})),s.push(d(e,"touchend",f,{passive:!0})),s.push(d(window,"scroll",()=>{o||l(e)},{passive:!0}))}return i.trapFocus&&s.push(d(document,"keydown",o=>{if(p(o)!==9)return;const a=j(e);if(!a[0]){o.preventDefault(),h(e);return}const f=C(),v=a[0],B=a[a.length-1];if(o.shiftKey&&f===v){o.preventDefault(),h(B);return}!o.shiftKey&&f===B&&(h(v),o.preventDefault())})),()=>{for(;s.length;)s.shift().call()}}function k(t){const e=y(t);return e?e.hasAttribute("data-ctrly-opened")||!b(e,"open")?!1:(u[e.id]={lastActiveElement:C(),destroy:_(t,e)},x(e).forEach(s=>{s.tagName.toLowerCase()!=="button"&&s.setAttribute("aria-pressed","true"),s.setAttribute("aria-expanded","true")}),e.setAttribute("data-ctrly-opened",""),e.setAttribute("aria-hidden","false"),e.setAttribute("tabindex","-1"),b(e,"opened"),e):(T(t),!1)}function g(t,e){const s=y(e);if(!s){l(A(e))&&t.preventDefault();return}if(e.getAttribute("aria-expanded")==="true"){l(s)&&t.preventDefault();return}i.allowMultiple||M(s),k(e),s&&(t.preventDefault(),i.focusTarget&&h(j(s)[0]||s),s.scrollTop=0,s.scrollLeft=0)}let m,w;function S(){m||(m=F(document,"click",n,(t,e)=>{p(t)===1&&g(t,e)}),w=F(document,"keydown",n,(t,e)=>{(p(t)===13||p(t)===32)&&g(t,e)})),E(n).forEach(t=>{const e=y(t);if(!e){T(t);return}t.tagName.toLowerCase()!=="button"&&(t.hasAttribute("role")||t.setAttribute("role","button"),V(t)||t.setAttribute("tabindex","0")),t.setAttribute("aria-controls",e.id);const s=x(e).map(a=>(a.id||a.setAttribute("id","ctrly-control-"+ ++R),a.id)),o=(e.getAttribute("aria-labelledby")||"").split(" ").concat(s).filter((a,f,v)=>a!==""&&v.indexOf(a)===f);if(e.setAttribute("aria-labelledby",o.join(" ")),t.getAttribute("aria-expanded")==="true"||t.hasAttribute("data-ctrly-open")){k(t);return}t.tagName.toLowerCase()!=="button"&&t.setAttribute("aria-pressed","false"),t.setAttribute("aria-expanded","false"),e.setAttribute("aria-hidden","true"),e.removeAttribute("tabindex")})}function D(t){t&&m&&(m(),m=null,w(),w=null),E(n).forEach(e=>{t&&T(e);const s=y(e);s&&(l(s,!1),t&&s.removeAttribute("aria-hidden"))});for(const e in u)Object.prototype.hasOwnProperty.call(u,e)&&(u[e].destroy(),delete u[e])}function q(){D(!1)}function $(){D(!0)}return i.autoInit&&X(S),{closeAll:q,destroy:$,init:S}}K({selector:".js-off-canvas-menu-control",closeOnScroll:!0,trapFocus:!0});K({selector:".js-off-canvas-menu-submenu-control",closeOnOutsideClick:!1,closeOnBlur:!1});
